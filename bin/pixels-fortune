#!/usr/bin/python
 
# Install script
# curl -o pixels-fortune https://gist.githubusercontent.com/kui/c0f4b48d143b7af19018/raw/pixels-fortune.py && chmod +x pixels-fortune
 
# How to add PIXELS.
# 1. Edit on https://kui.github.io/ansi_pixels/
# 2. Copy and paste the hash(#) in URL
#
# You can also copy PIXELS String("eAG...") and paste to
# the prefix (https://kui.github.io/ansi_pixels/#...) of the browser address bar.
PIXELS = [
    # Ansi Pixels Logo
    "eAGrVirIrEjNCc6sSlWyMjXQUUpKd87PyS9SslIKcndy1DDQUYAiPQtNJR2lNLh0eEZmSSpQJBnEDy5ITAYaoGRkagYUystPL8pMKVayKikqTdWB2ADkRUcb6MBhrA6YZwaEMB6YBSKhPAhElTOF6oOZElsLAJ-TMsM=",
 
    # Coffin (Dragon Quest)
    "eAGrVirIrEjNCc6sSlWyMjbWUUpKd87PyS9SslIKcndy1DDQUYAiPQtNJR2lNLh0eEZmSSpQJBnEDy5ITAYaoGRkagYUystPL8pMKVayKikqTdWB2ADkRUcbmumQjmJ1hqY-cyPcmJB2oBpTbAinYQjdEK2WJjpGRmYgChlhMw2mFWoaVCMyRjMEjpC1m8J1GxoYgHWBaBAmUjeqAdjUomFTFO0Qz-ELcyyBiaIdM3hMjRBSyEGIFNpwm3H5Eoc-uJ-xKkR1JGbSwp40BmEWIFpfbC0ANoLx_A==",
 
    # Mosquito (Metal Max)
    "eAGtVM8LwiAU_lfinQokTKHGbtWhex06RId-rDUYLVZBFP3vudTh3DQd49vUOd_33vee-oZr8ozSVfKKIByNEezjeZZmOYSwXMymfYx64hkGA0BwKn-vz8k9YjOH4nt13R0YAQRs4pLFeXK8QXjPHxHi_Oxrs7k80hS1bPAP3nZb5OwVCxDxdu8GI8rA-Ym3nhZSquiKvcEZVzNhMOrydSCjlimTY51c8tb1UmHBGSQa7IvIiyW0RNVYnXd1LqtMtLF7UrAIW7Wn4q3tHwMR16FGpQOXqowUaj5NYEQW-4mogRq-ih-zRYKUa_JNrP6Jso5qbfV02Mthg1s5lIBsgtzCoZpzvf9T13qGiLF3JGrccnqW2t5n8oBWW58D5Vnapjts-_kCVMQmQw==",
 
    # Pac-Man
    "eAHNlD0LwjAQhv-K3KQQJLUSpZs6uNvBoXTwo2qhWLEOovjfTWnSpElOCyrI2-HNXXkuXK93h1N6TbIwvSUQDCiB9X6WZ_kZAljMp5MuJR3x9Mc9ILCr08tDekl4ZFOew9NqwwEw5oFjvj-n2wKC3SorElIV4McoouRniklN92u53_WEMBYTsum-JTcZq8AM6XSb3eSbbJNvsmt-C7pHRlySqrxilzFJVV7vO84fCUm29NTIS7b0za9q16hiQy5J1D018iVR9za9WaPqC0b3RF8wOmtxdw_tu6RjfWct-u6aF5OO6f3M_Dv91b_6DTq-ZxTJ5fTt4nDOibR3DO6otlcs14L-geL48QSYojuO",
 
    # Black Mage (Final Fantasy)
    "eAGllEkLwjAQhf-KzEkhyGADSm_qwbsePIgHrW0thFZcQBT_u6maZhvrUl4pWb73kkxor7DLzrGYZZcYwl6fwTodF6LYQwjTyWjYRtZ6Pd1BBxgk1fR8mx1jORKV_dluFckAGMiBvEj32eYAYbISh5g9F5DdxSI_CcEav_ChsrlkzSPLrEAKG4Y9UwLW-zMJzYRfT6fNpd0NQEsmp0iF69nA4Xz2Fa0mfQOBG9txfRZfd350AuoXsy8ICfe7YmPlCDwXOgfiRnVVS43Z5eIMSXG6uvwhhZgicR_ysu2rRgem013W7tfsBL_FNYq1O3HwTxs3qoi_4bbhC9zM1SuiLiEnZZjoz1WJ_P8tb3dwlp-G",
 
    # White Mage (Final Fantasy)
    "eAGVk0uLwjAQx7-KzEkhLBN7qPS2etj7etiDePBRtRCs-ABx2e--bfNqJhNRpg1N5vf_5zHNL5yqe6nm1aOEYpwLWO9ntarPUMD31_RziGJgno_JCATsXPrnUF3LZmTT9uen1aYxgEkzcKz352p7gWK3UpdS6Ama7mJxvCkl3m_QRDi8FC_7aXluAt_w6OtCfULKCZ6JOBpTCptAMg1GOBpOmgjp_v4pGdIc2-azJ3Rgih2MRoIUDBabdW_mvpMnpwUezxyeqq1V2MCYJ0tCovFnHynaffoyxMWhbFwQJAtyoE3n5uSZevth7yedOHKUEchUTxJPJDJm4y9NTUH-dmhbzUqBbn6ZYO0btlrL_Akyit494W5oOjr35d8_NLtiZg==",
 
    # Locke (Final Fantasy VI)
    "eAGVlMtOwzAQRX8FeQWShRonTersgAV7umARdVFKWiJFTdWChED8Ox6_MhlPEZWch-05947Hcb7Fofts-2X31Yo6K6R42T0M_XAUtXh6vL-7nskr324XN0KKbZx-fuveWzOygf7ysN4YAaHmpRnaD7tj93oS9Xbdn1rpLEy3afYffS_JLSuZxgXCbSWbhCwKe80X0FCPlwkKZ0mVZ_E906kKErCh5qFUEEA6wGq6HOpehrBJJ5KzPNAIdEtjuGDu-pbl6lUpXLkSlcs3zYOwzHHR_G6l2do8dICtuQ6DsT5ciaKAg62AT30ioNEuMeyYuG8jWUVFmrP3yasAwdvoaqZtFVg4uAGCrymusARvDfM2ZkpTfwMbQBc-VXjxcAA15mIZHQcxmI2NjBCvGOCVITf3sYb1xiBaW_K5IIEyBdNdZf4e-Kzg_P8roPHZ4_9AZxTwIXAqxPkvBcLggl_sj4Uu4FM59km0Vj-_i96k9Q==",
]
 
import sys, base64, zlib, json, types, random
 
def main():
    px = select_pixels()
    m = convert(px)
    for row in m:
        for code in row:
            sys.stdout.write('%s  ' % ansi_color(code))
        print(ansi_color(None))
 
def select_pixels():
    return PIXELS[random.randint(0, len(PIXELS) - 1)]
 
def convert(b64):
    zipped = base64.urlsafe_b64decode(b64)
    json_str = zlib.decompress(zipped)
    j = json.loads(json_str)
    if type(j) is types.DictType:
        return j['pixels']
    elif type(j) is types.ListType:
        return j
    else:
        sys.exit('Invalid JSON: %s' % type(j))
 
def ansi_color(code):
    if code == None:
        return '\033[0m'
    else:
        return '\033[48;5;%dm' % code
 
main()
